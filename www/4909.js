"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4909],{4909:(I,g,a)=>{a.r(g),a.d(g,{SearchPageModule:()=>U});var h=a(9808),d=a(3075),s=a(603),u=a(7460),l=a(655),_=a(3489),f=a(353);class S{constructor(o,i){this.dueTime=o,this.scheduler=i}call(o,i){return i.subscribe(new T(o,this.dueTime,this.scheduler))}}class T extends _.L{constructor(o,i,t){super(o),this.dueTime=i,this.scheduler=t,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(o){this.clearDebounce(),this.lastValue=o,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(C,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:o}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(o)}}clearDebounce(){const o=this.debouncedSubscription;null!==o&&(this.remove(o),o.unsubscribe(),this.debouncedSubscription=null)}}function C(n){n.debouncedNext()}var v=a(8929),e=a(2096),Z=a(4457),b=a(5097);const y=["searchBar"];function P(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&n){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function M(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&n){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function J(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&n){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function Q(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&n){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function F(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&n){const i=o.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function A(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",7)(2,"ion-list")(3,"ion-list-header",8),e._uU(4),e.qZA()()(),e.BQk()),2&n){const i=e.oxw();e.xp6(4),e.hij(" ",i.recipes.length>0?"Your results":"No recipes found"," ")}}function N(n,o){if(1&n){const i=e.EpF();e.TgZ(0,"ion-slide")(1,"ion-card"),e._UZ(2,"img",10),e.TgZ(3,"ion-card-header")(4,"ion-card-title"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-card-content")(7,"ion-grid")(8,"ion-row")(9,"ion-col",11)(10,"div",12)(11,"ion-button",13),e._UZ(12,"ion-icon",14),e.qZA()()(),e.TgZ(13,"ion-col",11)(14,"div",12)(15,"ion-button",15),e.NdJ("click",function(){const c=e.CHM(i).$implicit;return e.oxw(2).toggleFavorite(c)}),e._UZ(16,"ion-icon",16),e.qZA()()()()()()()()}if(2&n){const i=o.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("src",i.image,e.LSH),e.xp6(3),e.Oqu(i.title),e.xp6(6),e.Q6J("routerLink","/detail/"+i.id),e.xp6(4),e.Q6J("disabled",t.isFavorite(i))}}function O(n,o){if(1&n&&(e.TgZ(0,"ion-slides"),e.YNc(1,N,17,4,"ion-slide",9),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.recipes)}}const q=[{path:"",component:(()=>{class n{constructor(i,t,r,c,p,k){this.spoonacularService=i,this.favoritesService=t,this.toastController=r,this.loadingController=c,this.router=p,this.route=k,this.searchQuery$=new v.xQ,this.diets=["Vegan","Vegetarian","Paleo","Ketogenic","Gluten Free"],this.cuisines=["African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],this.types=["Main Course","Side Dish","Dessert","Appetizer","Salad","Bread","Breakfast","Soup","Beverage","Sauce","Marinade","Fingerfood","Snack","Drink"],this.intolerances=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],this.occasions=["Brunch","Dinner","Lunch","Party","Summer"],this.selectedIntolerances=[]}ngOnInit(){this.searchQuery="",this.searchQuery$.next(this.searchQuery),this.route.queryParams.subscribe(i=>{if(i.ingredients&&"true"===i.commingFromFoodPage){const t=JSON.parse(i.ingredients);this.searchQuery=t.join(" ")}}),this.searchQuery$.pipe(function m(n,o=f.P){return i=>i.lift(new S(n,o))}(750)).subscribe(()=>{this.searchRecipes()})}searchRecipes(){return(0,l.mG)(this,void 0,void 0,function*(){yield this.presentLoading();const i=this.selectedIntolerances.join(",");this.spoonacularService.searchRecipes(this.searchQuery,10,this.selectedDiet,this.selectedCuisine,i,this.selectedType,this.selectedOccasion).subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){this.recipes=t.results,yield this.loadingController.dismiss(),0===this.recipes.length&&(yield this.toastController.create({message:"No recipes found with this search",duration:2e3,position:"top",animated:!0,color:"danger"})).present()}),t=>(0,l.mG)(this,void 0,void 0,function*(){console.log("Error searching recipes:",t),yield this.loadingController.dismiss()}))})}presentLoading(){return(0,l.mG)(this,void 0,void 0,function*(){const i=yield this.loadingController.create({message:"Loading recipes..."});return yield i.present(),i})}clearFilter(i){return(0,l.mG)(this,void 0,void 0,function*(){switch(i){case"diet":this.selectedDiet=null;break;case"cuisine":this.selectedCuisine=null;break;case"type":this.selectedType=null;break;case"intolerances":this.selectedIntolerances=[];break;case"occasion":this.selectedOccasion=null}this.selectedDiet||this.selectedCuisine||this.selectedType||0!==this.selectedIntolerances.length||this.selectedOccasion?yield this.presentLoading():yield this.loadingController.dismiss(),this.searchRecipes()})}isFavorite(i){return this.favoritesService.isFavorite(i.id)}toggleFavorite(i){return(0,l.mG)(this,void 0,void 0,function*(){this.favoritesService.isFavorite(i.id)||(yield this.favoritesService.addToFavorites(i),(yield this.toastController.create({message:"Recipe added to favorites",duration:2e3,position:"top",animated:!0,color:"success"})).present())})}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(Z.q),e.Y36(b.G),e.Y36(s.yF),e.Y36(s.HT),e.Y36(u.F0),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search"]],viewQuery:function(i,t){if(1&i&&e.Gf(y,7),2&i){let r;e.iGM(r=e.CRH())&&(t.searchBar=r.first)}},decls:50,vars:14,consts:[[3,"placeholder","ngModel","ngModelChange","ionChange"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["slot","end","fill","clear","size","small",3,"click"],["multiple","true",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],[3,"value"],[1,"favorite-header"],[1,"favorite-header-title"],[4,"ngFor","ngForOf"],["alt","No image found for this recipe",3,"src"],["size","6",1,"icon-col"],[1,"icon-container"],["color","success",3,"routerLink"],["name","eye"],["color","warning",3,"disabled","click"],["name","star"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"SmartCook"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-searchbar",0),e.NdJ("ngModelChange",function(c){return t.searchQuery=c})("ionChange",function(){return t.searchQuery$.next(t.searchQuery)}),e.qZA(),e.TgZ(6,"ion-grid")(7,"ion-row")(8,"ion-col")(9,"ion-item")(10,"ion-label"),e._uU(11,"Diet"),e.qZA(),e.TgZ(12,"ion-select",1),e.NdJ("ngModelChange",function(c){return t.selectedDiet=c})("ionChange",function(){return t.searchRecipes()}),e.YNc(13,P,2,2,"ion-select-option",2),e.qZA(),e.TgZ(14,"ion-button",3),e.NdJ("click",function(){return t.clearFilter("diet")}),e._uU(15,"Clear"),e.qZA()()(),e.TgZ(16,"ion-col")(17,"ion-item")(18,"ion-label"),e._uU(19,"Cuisine"),e.qZA(),e.TgZ(20,"ion-select",1),e.NdJ("ngModelChange",function(c){return t.selectedCuisine=c})("ionChange",function(){return t.searchRecipes()}),e.YNc(21,M,2,2,"ion-select-option",2),e.qZA(),e.TgZ(22,"ion-button",3),e.NdJ("click",function(){return t.clearFilter("cuisine")}),e._uU(23,"Clear"),e.qZA()()(),e.TgZ(24,"ion-col")(25,"ion-item")(26,"ion-label"),e._uU(27,"Type"),e.qZA(),e.TgZ(28,"ion-select",1),e.NdJ("ngModelChange",function(c){return t.selectedType=c})("ionChange",function(){return t.searchRecipes()}),e.YNc(29,J,2,2,"ion-select-option",2),e.qZA(),e.TgZ(30,"ion-button",3),e.NdJ("click",function(){return t.clearFilter("type")}),e._uU(31,"Clear"),e.qZA()()(),e.TgZ(32,"ion-col")(33,"ion-item")(34,"ion-label"),e._uU(35,"Intolerances"),e.qZA(),e.TgZ(36,"ion-select",4),e.NdJ("ngModelChange",function(c){return t.selectedIntolerances=c})("ionChange",function(){return t.searchRecipes()}),e.YNc(37,Q,2,2,"ion-select-option",2),e.qZA(),e.TgZ(38,"ion-button",3),e.NdJ("click",function(){return t.clearFilter("intolerances")}),e._uU(39,"Clear "),e.qZA()()(),e.TgZ(40,"ion-col")(41,"ion-item")(42,"ion-label"),e._uU(43,"Occasion"),e.qZA(),e.TgZ(44,"ion-select",1),e.NdJ("ngModelChange",function(c){return t.selectedOccasion=c})("ionChange",function(){return t.searchRecipes()}),e.YNc(45,F,2,2,"ion-select-option",2),e.qZA(),e.TgZ(46,"ion-button",3),e.NdJ("click",function(){return t.clearFilter("occasion")}),e._uU(47,"Clear "),e.qZA()()()()(),e.YNc(48,A,5,1,"ng-container",5),e.YNc(49,O,2,1,"ion-slides",5),e.qZA()),2&i&&(e.xp6(5),e.Q6J("placeholder","Search recipes...")("ngModel",t.searchQuery),e.xp6(7),e.Q6J("ngModel",t.selectedDiet),e.xp6(1),e.Q6J("ngForOf",t.diets),e.xp6(7),e.Q6J("ngModel",t.selectedCuisine),e.xp6(1),e.Q6J("ngForOf",t.cuisines),e.xp6(7),e.Q6J("ngModel",t.selectedType),e.xp6(1),e.Q6J("ngForOf",t.types),e.xp6(7),e.Q6J("ngModel",t.selectedIntolerances),e.xp6(1),e.Q6J("ngForOf",t.intolerances),e.xp6(7),e.Q6J("ngModel",t.selectedOccasion),e.xp6(1),e.Q6J("ngForOf",t.occasions),e.xp6(3),e.Q6J("ngIf",t.recipes&&t.searchQuery),e.xp6(1),e.Q6J("ngIf",t.searchQuery))},directives:[s.Gu,s.sr,s.wd,s.W2,s.VI,s.j9,d.JJ,d.On,s.jY,s.Nd,s.wI,s.Ie,s.Q$,s.t9,s.QI,h.sg,s.n0,s.YG,h.O5,s.q_,s.yh,s.Hr,s.A$,s.PM,s.Zi,s.Dq,s.FN,s.YI,u.rH,s.gu],styles:[".empty-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center}.empty-results[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:green;font-size:4rem;margin-bottom:1rem}.empty-results[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.5rem}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(q)],u.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,d.u5,s.Pc,x]]}),n})()}}]);