"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[230],{230:(A,m,i)=>{i.r(m),i.d(m,{SignupPageModule:()=>F});var p=i(9808),h=i(3075),l=i(7460),r=i(9928),v=i(655),f=i(8046),s=i(3725),t=i(2096),S=i(7556),y=i(4457);let P=(()=>{class o{constructor(e,n,u,g){this.authService=e,this.firestore=n,this.router=u,this.spoonacularService=g}ngOnInit(){}signupUser(e){return(0,v.mG)(this,void 0,void 0,function*(){try{const n=yield this.authService.signup(e.email,e.password);this.authService.userId=n.uid,yield this.signupForm.hideLoading(),(0,s.JU)(this.firestore,`users/${n.uid}`);const g=(0,s.JU)(this.firestore,`users/${n.uid}/fridges/fridge`);yield(0,s.pl)(g,{id_user:n.uid});const c=yield this.spoonacularService.searchIngredients("tomato",1).toPromise();if(c&&c.results&&c.results.length>0){const d=c.results[0],T=(0,s.JU)(this.firestore,`users/${n.uid}/fridges/fridge/ingredients/${d.id}`);yield(0,s.pl)(T,{id:d.id,name:d.name,image:"https://spoonacular.com/cdn/ingredients_100x100/"+d.image})}this.router.navigateByUrl("home")}catch(n){yield this.signupForm.hideLoading(),this.signupForm.handleError(n)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(S.e),t.Y36(s.gg),t.Y36(l.F0),t.Y36(y.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-signup"]],viewQuery:function(e,n){if(1&e&&t.Gf(f.c,5),2&e){let u;t.iGM(u=t.CRH())&&(n.signupForm=u.first)}},decls:11,vars:1,consts:[["slot","start"],["defaultHref","/login"],[3,"actionButtonText","formSubmitted"],["signupForm",""],["expand","block","fill","clear","routerLink","/login"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"SmartCook"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"app-auth-form",2,3),t.NdJ("formSubmitted",function(g){return n.signupUser(g)}),t.qZA(),t.TgZ(9,"ion-button",4),t._uU(10," I already have an account "),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("actionButtonText","Create Account"))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,f.c,r.YG,r.YI,l.rH],styles:[""]}),o})();var U=i(4833);const Z=[{path:"",component:P}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,h.u5,r.Pc,l.Bz.forChild(Z),U.n]]}),o})()}}]);