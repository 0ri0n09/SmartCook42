"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9445],{9445:(A,f,r)=>{r.r(f),r.d(f,{FoodPageModule:()=>O});var l=r(9808),u=r(3075),o=r(931),m=r(7460),h=r(655),g=r(3725),p=r(4850),_=r(7221),F=r(8896),e=r(2096),P=r(7556),v=r(8037),x=r(4457);function y(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"ion-col",5)(1,"ion-card",6)(2,"ion-card-header")(3,"ion-card-title")(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-card-content",7),e._UZ(7,"ion-img",8),e.qZA(),e.TgZ(8,"ion-button",9),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(2).addIngredient(s.id,s.name,s.image)}),e._UZ(9,"ion-icon",10),e.qZA()()()}if(2&t){const n=c.$implicit;e.xp6(5),e.Oqu(n.name.toUpperCase()),e.xp6(2),e.Q6J("src","https://spoonacular.com/cdn/ingredients_100x100/"+n.image)}}function C(t,c){if(1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row"),e.YNc(2,y,10,2,"ion-col",4),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.searchResults)}}function Z(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"ion-col",5)(1,"ion-card",6)(2,"ion-card-header")(3,"ion-card-title")(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-card-content",7),e._UZ(7,"ion-img",8),e.qZA(),e.TgZ(8,"ion-button",11),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(2).deleteIngredient(s.id)}),e._UZ(9,"ion-icon",12),e.qZA()()()}if(2&t){const n=c.$implicit;e.xp6(5),e.Oqu(n.name.toUpperCase()),e.xp6(2),e.Q6J("src",n.image)}}function M(t,c){if(1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row"),e.YNc(2,Z,10,2,"ion-col",4),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.ingredients)}}function I(t,c){1&t&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2,"Your fridge is empty, fill it with the search bar above :)"),e.qZA()())}const T=[{path:"",component:(()=>{class t{constructor(n,i,d,s){this.firestore=n,this.authService=i,this.profileService=d,this.spoonacularService=s}ngOnInit(){this.ingredients=[]}ionViewDidEnter(){this.loadIngredients()}loadIngredients(){return(0,h.mG)(this,void 0,void 0,function*(){this.authService.getUser().pipe((0,p.U)(n=>(this.currentUser=n,(0,g.JU)(this.firestore,`users/${n.uid}/fridges/fridge`))),(0,_.K)(()=>F.E)).subscribe(n=>(0,h.mG)(this,void 0,void 0,function*(){try{const i=(0,g.hJ)(n,"ingredients"),d=yield(0,g.PL)(i);this.ingredients=d.docs.map(s=>{const a=s.data();return{id:s.id,name:a.name,image:a.image}})}catch(i){console.log("Error loading ingredients:",i)}}),n=>{console.log("Error getting user:",n)})})}selectIngredients(){this.spoonacularService.searchIngredients(this.searchQuery).subscribe(n=>{this.searchResults=n.results,this.searchResults.forEach((i,d)=>{this.ingredients.find(a=>a.name===i.name)&&this.searchResults.splice(d,1)})},n=>{console.log("Error searching ingredients:",n)})}addIngredient(n,i,d){const s={id:n,name:i,image:"https://spoonacular.com/cdn/ingredients_100x100/"+d},a=(0,g.hJ)(this.firestore,`users/${this.currentUser.uid}/fridges/fridge/ingredients`);(0,g.ET)(a,s).then(()=>{this.loadIngredients()}).catch(U=>{console.log("Error adding ingredient:",U)})}deleteIngredient(n){return(0,h.mG)(this,void 0,void 0,function*(){const i=(0,g.JU)(this.firestore,`users/${this.currentUser.uid}/fridges/fridge/ingredients/${n}`);yield(0,g.oe)(i),this.loadIngredients()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.gg),e.Y36(P.e),e.Y36(v.H),e.Y36(x.q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-food"]],decls:10,vars:5,consts:[[3,"placeholder","ngModel","ngModelChange","ionChange"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["emptyFridge",""],["size","6",4,"ngFor","ngForOf"],["size","6"],[1,"ingredient-card"],[1,"ingredient-content"],["alt","No picture found for this ingredient",1,"ingredient-image",3,"src"],["color","primary",1,"add-button",3,"click"],["name","add-circle"],["color","danger",1,"add-button",3,"click"],["name","trash"],[1,"empty-fridge"],[1,"text"]],template:function(n,i){if(1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"SmartCook | My Fridge"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-searchbar",0),e.NdJ("ngModelChange",function(s){return i.searchQuery=s})("ionChange",function(){return i.selectIngredients()}),e.qZA(),e.YNc(6,C,3,1,"ion-grid",1),e.YNc(7,M,3,1,"ion-grid",2),e.YNc(8,I,3,0,"ng-template",null,3,e.W1O),e.qZA()),2&n){const d=e.MAs(9);e.xp6(5),e.Q6J("placeholder","Search ingredients for your fridge")("ngModel",i.searchQuery),e.xp6(1),e.Q6J("ngIf",i.searchResults&&i.searchResults.length>0),e.xp6(1),e.Q6J("ngIf",i.ingredients&&i.ingredients.length>0)("ngIfElse",d)}},directives:[o.Gu,o.sr,o.wd,o.W2,o.VI,o.j9,u.JJ,u.On,l.O5,o.jY,o.Nd,l.sg,o.wI,o.PM,o.Zi,o.Dq,o.FN,o.Xz,o.YG,o.gu],styles:[".empty-fridge[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center}.empty-fridge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:green;font-size:4rem;margin-bottom:1rem}.empty-fridge[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.5rem}.ingredient-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.ingredient-image[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}.ingredient-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:10px}.add-button[_ngcontent-%COMP%]{width:100%;margin-top:2px}"]}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(T)],m.Bz]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,u.u5,o.Pc,J]]}),t})()}}]);